# http
超文本传输协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。

## 特点
1. 支持客户/服务器模式。
2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。
3. 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。
4. 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
5. ==无状态==：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。 

## 缺点
### 1.无状态，有了Cookie
保留用户的登录状态
### 2.不足
1. http协议的所有传输内容都是明文，即便是自己加密了，但是加密的内容也依旧是明文，这就避免不了被窃听！
2. http协议传输的过程中没有身份验证这一说，这样就不免半路杀出一个不明身份就行身份冒充！
3. http协议传输的过程中也并没有进行数据完整性的校验，不免有些人在中途进行内容篡改！

# https        过程HTTP->SSL3.0/TLS1.0->TCP
https协议是由http和ssl协议构建的可进行==加密传输和身份认证==的网络协议，比http协议的安全性更高。（还有完整性保护）
## 与http主要的区别如下：

-   Https协议需要ca证书，费用较高。
-   http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。
-   使用不同的链接方式，端口也不同，一般而言，http协议的端口为80，https的端口为443
-   http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。

## https协议的工作原理
客户端在使用HTTPS方式与Web服务器通信时有以下几个步骤，如图所示。

1. 客户使用https url访问服务器，则要求web 服务器建立ssl链接。
web服务器接收到客户端的请求之后，会将网站的证书（证书中包含了公钥），返回或者说传输给客户端。
2. 客户端和web服务器端开始协商SSL链接的安全等级，也就是加密等级。
3. 客户端浏览器通过双方协商一致的安全等级，建立会话密钥，然后通过网站的公钥来加密会话密钥，并传送给网站。
4. web服务器通过自己的私钥解密出会话密钥。
5. web服务器通过会话密钥加密与客户端之间的通信。

## 菜鸟教程的工作原理
1、客户端发起 HTTPS 请求

这个没什么好说的，就是用户在浏览器里输入一个 https 网址，然后连接到 server 的 443 端口。

2、服务端的配置

采用 HTTPS 协议的服务器必须要有一套数字证书，可以自己制作，也可以向组织申请，区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面(startssl 就是个不错的选择，有 1 年的免费服务)。

这套证书其实就是一对公钥和私钥，如果对公钥和私钥不太理解，可以想象成一把钥匙和一个锁头，只是全世界只有你一个人有这把钥匙，你可以把锁头给别人，别人可以用这个锁把重要的东西锁起来，然后发给你，因为只有你一个人有这把钥匙，所以只有你才能看到被这把锁锁起来的东西。

3、传送证书

这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间等等。

4、客户端解析证书

这部分工作是有客户端的TLS来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。

如果证书没有问题，那么就生成一个随机值，然后用证书对该随机值进行加密，就好像上面说的，把随机值用锁头锁起来，这样除非有钥匙，不然看不到被锁住的内容。

5、传送加密信息

这部分传送的是用证书加密后的随机值，目的就是让服务端得到这个随机值，以后客户端和服务端的通信就可以通过这个随机值来进行加密解密了。

6、服务段解密信息

服务端用私钥解密后，得到了客户端传过来的随机值(私钥)，然后把内容通过该值进行对称加密，所谓对称加密就是，将信息和私钥通过某种算法混合在一起，这样除非知道私钥，不然无法获取内容，而正好客户端和服务端都知道这个私钥，所以只要加密算法够彪悍，私钥够复杂，数据就够安全。

7、传输加密后的信息

这部分信息是服务段用私钥加密后的信息，可以在客户端被还原。

8、客户端解密信息

客户端用之前生成的私钥解密服务段传过来的信息，于是获取了解密后的内容，整个过程第三方即使监听到了数据，也束手无策。
## https协议的优点
1. 使用HTTPS协议可认证用户和服务器，确保数据发送到正确的客户机和服务器；
2. HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全，可防止数据在传输过程中不被窃取、改变，确保数据的完整性。
3. HTTPS是现行架构下最安全的解决方案，虽然不是绝对安全，但它大幅增加了中间人攻击的成本。
4. SEO方面 谷歌曾在2014年8月份调整搜索引擎算法，并称“==比起同等HTTP网站，采用HTTPS加密的网站在搜索结果中的排名将会更高==”。(seo搜索引擎优化。是一种方式：利用搜索引擎的规则提高网站在有关搜索引擎内的自然排名)

## https协议的缺点
1. https握手阶段比较费时，会使页面加载时间延长50%，增加10%~20%的耗电。
2. https缓存不如http高效，会增加数据开销。
3. SSL证书也需要钱，功能越强大的证书费用越高。
4. SSL证书需要绑定IP，不能再同一个ip上绑定多个域名，ipv4资源支持不了这种消耗。

## SSL

### 对称加密->共享密钥加密
通信双方通过相同的密钥进行信息的加解密。加解密速度快，但是安全性较差，如果其中一方泄露了密钥，那加密过程就会被人破解。
### 非对称加密->公开密钥加密
相比对称加密，它一般有公钥和私钥。公钥负责信息加密，私钥负责信息解密。两把密钥分别由发送双发各自保管，加解密过程需两把密钥共同完成。安全性更高，但同时计算量也比对称加密要大很多
### 结合加密与非加密
SSL协议是通过非对称密钥机制保证双方身份认证，并完成建立连接，在实际数据通信时通过对称密钥机制保障数据安全性

### 解释下非对称加密为什么安全于对称
我们再来说说非对称加密，非对称加密是一种比对称加密更加优秀的加密算法，当然算法有利有弊，对称加密速度快但是安全性相对于非对称加密来说低，为什么呢，你想啊，要想使用对称加密，那么分享信息的各个个体之间都需要分享这个密钥，比如你们1000个人之间都使用同一个密钥进行密文传输，只要其中一个人密钥被盗窃了，那么整体加密的信息将都被破解了。好了，那么我们开始说说非对称加密。

就从上面提到的这个对称加密的缺点开始，==怎么做到即时一个人的密钥被盗窃了，最起码保证你给其他人发送密文不被破解==。于是，人们就想出了这么个办法，==首先，我们停止分享共同的密钥，因为上面的bug就是来源于共享一个密钥，那么怎么办呢？每个人生成一个“私钥-公钥”对，这个私钥需要每个人自行进行保护！公钥可以随便分享==，后面详细说，同时，生成的这个“私钥-公钥”对还有个强大的功能就是，使用私钥加密的信息，只能由该私钥对应的公钥才能解密，==使用公钥加密的信息，只能由该公钥对应的私钥才能解密==！

好了，比如说张三生成了他自己的一个“私钥-公钥”对，叫做“张三私钥-张三公钥”，李四生成了他自己的一个“私钥-公钥”对，叫做“李四私钥-李四公钥”，之前我们说过私钥要每个个体自己进行保存，公钥可以随便分享，目的是为什么呢？是为了加密信息！

比如，李四想给张三发送密文。
于是李四开始给张三发QQ
```
李四：
“hi哥们，我想给你发个密文，把你的公钥给我发过来用用。”

张三：
“没问题的，这是我的公钥： d#8yHE8eU#hb*!neb，用这个公钥加密你的信息后给我发过来吧”

李四：
“这是我想对你说的话： *&#@uehuu(**#eehu&$##bfeu&&”
```
恩？你是不是有点疑问呢？咳咳，李四这是作死的节奏？为什么公开问公钥？不怕被网警查水表？哈哈，非对称解密算法的威力就在这里！无所谓！随便谁截取！我们上面说了，公钥可以随意分发，所以即使别人截取了，也只是知道该公钥而已，但是要是想解密使用该公钥加密的密文！只有一个人可以办得到！就是张三！ 为什么？李四使用张三的公钥加密的信息，只有张三的公钥所对应的私钥，这里就是“张三私钥”，该私钥才可以解密！所以，没有张三私钥的第三方即时截取了这些密文，也破解不了！或者更严格的说在有限时间内比如说几千年内是暴力破解不出的！

懂了吧？所以网警们哭了，本以为想监视他们的对话，可惜一无所获！
这种加密算法应用非常广泛，SSH, HTTPS, TLS，电子证书，电子签名，电子身份证等等。

这篇文章先写到这里，接下来我将像大家挨个介绍这些加密算法的应用，不过我在这里先埋个伏笔，上面我提到的李四和张三发qq，即时使用非对称加密算法，大家有没有发现仍然有哪些隐患呢？

给点提示，比如说，某个网警想知道到底李四要给张三发什么信息？网警想破解李四的密文，那么网警有什么办法可以获得李四要发的信息呢？很显然获得密文直接暴力破解是不可能的!

小提示，网警可以冒充张三！！！！发送给李四“网警的公钥”，而不是“张三的公钥”，那么当李四收到该公钥的时候，就不假思索的使用该公钥加密了他的信息，然后毫不犹豫的将加密的密文发了过去，然后网警得意的笑了。

所以，问题在哪呢？这就是数字签名和数字证书的来历！我们下回接着白话。
### 证明公开密钥正确性的证书
因为无法证明公开密钥本身就是货真价实的公开密钥，可以使用由数字认证机构（CA）和其颁发的公开密钥证书
1. 服务器提出申请
2. 对其已申请的公开密钥做数字签名，然后分配已签名的公开密钥
